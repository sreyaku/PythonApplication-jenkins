image: docker:19.03.12

services:
  - docker:19.03.12-dind

variables:
  USERNAME: badhusha_nb

stages:         
  - source
  - docker-build
  - approve
  - deploy
  - merge-request

source:      
  stage: source
  script:
    - echo "this is a stage named source..."
    - echo "this is a sample job created for study purpose......."


docker-build:   
  stage: docker-build 
  script:
    - echo "Running build....."
    # - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    # - docker build -t $CI_REGISTRY_IMAGE .
    # - docker push $CI_REGISTRY_IMAGE
    # - docker logout


approve:
  stage: approve
  script:
    - echo "Hello! this is manual approval stage"
  # environment:
  #   name: production
  #   url: https://example.com
  when: manual
  allow_failure: false 
  # only:
  #   - master

deploy:
  stage: deploy
  script:
    - echo "Hello!the application is deploying"
  # environment:
  #   name: production
  #   url: https://example.com    
  # only:
  #   - master

merge-request:
  stage: merge-request
  script:
    - echo "This job runs in merge request pipelines"
  only:
    - merge_requests